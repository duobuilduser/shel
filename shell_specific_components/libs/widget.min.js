angular.module("widget",[]).controller("clockWidgetController",["$scope","$mdDialog",function(e,t){function a(e,t){e.formats=[{name:"default",format:"ddd mmm dd yyyy HH:MM:ss"},{name:"shortDate",format:"m/d/yy"},{name:"longDate",format:"mmmm d, yyyy"},{name:"fullDate",format:"dddd, mmmm d, yyyy"},{name:"shortTime",format:"h:MM TT"},{name:"mediumTime",format:"h:MM:ss TT"},{name:"longTime",format:"h:MM:ss TT Z"},{name:"isoDate",format:"yyyy-mm-dd"},{name:"isoTime",format:"HH:MM:ss"},{name:"isoDateTime",format:"yyyy-mm-dd'T'HH:MM:ss"},{name:"isoUtcDateTime",format:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}],e.clockComponentformatChange=function(e){t.hide(e)},e.closeWidgetOptions=function(){t.cancel()}}var o=function(e){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(e,l,i){var c=o;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(l=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");l=String(c.masks[l]||l||c.masks["default"]),"UTC:"==l.slice(0,4)&&(l=l.slice(4),i=!0);var s=i?"getUTC":"get",d=e[s+"Date"](),m=e[s+"Day"](),h=e[s+"Month"](),u=e[s+"FullYear"](),g=e[s+"Hours"](),p=e[s+"Minutes"](),y=e[s+"Seconds"](),f=e[s+"Milliseconds"](),w=i?0:e.getTimezoneOffset(),v={d:d,dd:r(d),ddd:c.i18n.dayNames[m],dddd:c.i18n.dayNames[m+7],m:h+1,mm:r(h+1),mmm:c.i18n.monthNames[h],mmmm:c.i18n.monthNames[h+12],yy:String(u).slice(2),yyyy:u,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:p,MM:r(p),s:y,ss:r(y),l:r(f,3),L:r(f>99?Math.round(f/10):f),t:12>g?"a":"p",tt:12>g?"am":"pm",T:12>g?"A":"P",TT:12>g?"AM":"PM",Z:i?"UTC":(String(e).match(a)||[""]).pop().replace(n,""),o:(w>0?"-":"+")+r(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return l.replace(t,function(e){return e in v?v[e]:e.slice(1,e.length-1)})}}();o.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return o(this,e,t)};var n=o("mmmm d,yyyy");console.log(n),$("#clockmonthDay").append(n);var r=o("yyyy");console.log(r),$("#clockyear").append(r),$(function(){setInterval(function(){var e=(new Date).getSeconds(),t=6*e,a="rotate("+t+"deg)";$("#clocksec").css({transform:a})},1e3),setInterval(function(){var e=(new Date).getHours();$("#clockHours").text(e);var t=(new Date).getMinutes();$("#clockMins").text(t);var a=30*e+t/2,o="rotate("+a+"deg)";$("#clockhour").css({transform:o})},1e3),setInterval(function(){var e=(new Date).getMinutes(),t=6*e,a="rotate("+t+"deg)";$("#clockmin").css({transform:a})},1e3)}),e.clockComponentSelectformat=function(e){t.show({controller:a,templateUrl:"partials/widget-modal-templates/clockComponentformat.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){var t=o(e);$("#clockmonthDay").text(t)},function(){})}}]).controller("weatherWidgetController",["$scope","$http","$mdDialog",function(e,t,a){function o(e,t){e.cities=["colombo","galle","kandy"],e.weatherComponentCitySelectorChange=function(e){t.hide(e)},e.closeWidgetOptions=function(){t.cancel()}}e.loadWeather=function(a){e.weatherComponentCity=a,t.get("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22"+a+"%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys").success(function(t){if(console.log(t),void 0==t.query.results.channel.item.condition)e.weatherComponentError=!0,e.weatherComponentCity="Oops.. Weather details regarding this location is not available",e.weatherComponentWeather=[];else switch(e.weatherComponentError=!1,e.weatherForcast=t.query.results.channel.item.forecast,e.weatherComponentWeather=t.query.results.channel.item.condition,e.showMoon="",e.weatherComponentWeather.text){case"Sunny":e.weatherComponentIcon="sun";break;case"Fair":e.weatherComponentIcon="sun";break;case"Haze":e.weatherComponentIcon="partialyCloud";break;case"Partly Cloudy":e.weatherComponentIcon="partialyCloud";break;case"Mostly Cloudy":e.weatherComponentIcon="cloud";break;case"Cloudy":e.weatherComponentIcon="cloud";break;case"Mostly Cloudy":e.weatherComponentIcon="cloud";break;case"Rain":e.weatherComponentIcon="rainy";break;case"Rain Shower":e.weatherComponentIcon="rainy";break;case"Heavy Rain":e.weatherComponentIcon="rainy";break;case"Light Rain":e.weatherComponentIcon="drizzle";break;case"Light Shower":e.weatherComponentIcon="drizzle";break;case"Drizzle":e.weatherComponentIcon="drizzle";break;case"Drizzling":e.weatherComponentIcon="drizzle";break;case"Thunderstorm":e.weatherComponentIcon="thunder";break;case"Heavy Thunderstorm":e.weatherComponentIcon="thunder";break;case"Light Rain with Thunder":e.weatherComponentIcon="rainthunder";break;case"Rainstorm":e.weatherComponentIcon="rainthunder";break;default:e.weatherComponentIcon="partialyCloud"}}).error(function(e){console.log("Error retrieving markets")})},e.locZip="colombo",e.weatherComponentError=!1,e.loadWeather(e.locZip),e.weatherComponentSelectCity=function(t){a.show({controller:o,templateUrl:"partials/widget-modal-templates/weatherComponentCitySelector.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.loadWeather(t)},function(){})}}]).controller("userprofileWidgetController",["$scope","$auth","$objectstore",function(e,t,a){!function(){var t=$("[data-card-menu]"),o=$("[data-card-back]");t.click(function(){$(".card, body").toggleClass("show-menu")}),o.click(function(){$(".card, body").toggleClass("show-menu")}),e.shellUserProfileSection={bannerPicture:"images/userassets/contactcoverimg/cover3.jpg",company:"duo",country:"sl",email:"shelltest@duoworld.com",id:"admin@duosoftware.com",name:"Shell Test",phone:"11223344",zipcode:"123"},e.getProfilePicture=function(){var t=a.getClient("duosoftware.com","profilepictures",!0);t.onGetOne(function(t){t&&(e.profilePicture=t.Body),console.log(t)}),t.onError(function(e){console.log(e)}),t.getByKey("shelltest@duoworld.com")},e.getProfilePicture(),console.log(e.shellUserProfileSection,e.profilePicture)}()}]).controller("calenderWidgetController",["$scope",function(e){(function(){function t(){for(e.days=[],m=1;m<13;m++){var t=new Date(m+".01.2015").getDay();for(0==t&&(t=7),i=0;i<40;i++)if(i+1<t){var a={"class":"day invalid",date:"",month:m};e.days.push(a)}else if("Invalid Date"==new Date(m+"."+parseInt(i+2-t)+".2015"));else if(2==m&&parseInt(i+2-t)>28);else{var a={"class":"day",date:parseInt(i+2-t),month:m,task:""};e.days.push(a)}}}e.days=[],e.month=1,t(),e.previousMonth=function(){1==e.month?e.month=12:e.month=e.month-1},e.nextMonth=function(){12==e.month?e.month=1:e.month=e.month+1},e.monthNames=["","January","February","March","April","May","June","July","August","September","October","November","December"]}).call(this)}]).controller("chartsWidgetController",function(e){e.labels1=["January","February","March","April","May","June","July"],e.data1=[65,59,80,81,56,55,40],e.onClick=function(e,t){console.log(e,t)},e.labels2=["2006","2007","2008","2009","2010","2011","2012"],e.series2=["Series A","Series B"],e.data2=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]]}).directive("clockComponent",function(){return{controller:"clockWidgetController",template:" <div class='widget-card' style='background-color:{{$root.shellConfig.themeconfiguration.primarypalette}};padding:4px;'><md-button style='min-width: 10px;' ng-click='clockComponentSelectformat($event);'> <md-icon style='color:{{$root.shellConfig.themeconfiguration.accentpalette}}' md-svg-icon='icons/ic_menu_24px.svg' alt='menu'></md-icon></md-button><ul id='clockclock'><li id='clockhour'></li><li id='clockmin'></li><li id='clocksec'></li></ul><div id='clockdate'><p style='font-size:35px;font-weight:300;color:{{$root.shellConfig.themeconfiguration.accentpalette}};margin:10px;'><span id='clockHours'></span> : <span id='clockMins'></span> </p><span id=clockmonthDay'></span></div></div>"}}).directive("weatherComponent",function(){return{controller:"weatherWidgetController",template:' <div class="weather-wrapper" style="height:100%;" layout="column">    <div  class="weather widget-card " style="background-color:{{$root.shellConfig.themeconfiguration.primarypalette}};width: 100%;height: 80%;border-bottom: 5px {{$root.shellConfig.themeconfiguration.accentpalette}} solid;"> <md-button style="min-width: 10px;" ng-click="weatherComponentSelectCity($event);"><md-icon style="color: {{$root.shellConfig.themeconfiguration.accentpalette}}" md-svg-icon="icons/ic_menu_24px.svg" alt="menu"></md-button>   <div ng-if="!weatherComponentError" class="weather-icon {{weatherComponentIcon}}"><div class="{{showMoon}}"></div></div>        <h1 ng-if="!weatherComponentError" class="weather-card-title" style="color:{{$root.shellConfig.themeconfiguration.accentpalette}};">{{weatherComponentWeather.temp}} F</h1>        <p  class="weather-card-title2">{{weatherComponentCity}} <br><span style="font-size: medium;"> {{weatherComponentWeather.text}}<span></p>    </div><div class="weather-forcast-container" layout="row">            <div ng-repeat="f in weatherForcast" class="weather-forcast-item" flex layout="row" layout-align="center center" ><p>{{f.day}}<br><span>{{f.high}} F</span></p></div>            </div> </div>'}}).directive("userprofileComponent",function(){return{controller:"userprofileWidgetController",template:'<div class=" widget-card " style="background-color:white;"><!-- Face 2 -->  <div class=" card-face face-2"><!-- Back trigger -->    <button data-card-back="data-card-back" class="card-face__back-button"><img src="http://imgh.us/arrow_1.svg" width="19" height="19" draggable="false"/></button><img src="http://imgh.us/Likes.png" width="100" height="100" draggable="false" class="card-face__stats"/><img src="http://imgh.us/Followers.png" width="100" height="100" draggable="false" class="card-face__stats"/><img src="http://imgh.us/Views.png" width="100" height="100" draggable="false" class="card-face__stats"/><!-- Settings Button --><img src="http://imgh.us/cog.svg" width="17" height="17" draggable="false" class="card-face__settings-button"/>  </div><!-- Face 1 -->  <div class="card-face face-1"><!-- Menu trigger --><div style="background-image:url(images/userprofileComponentBg.jpg);background-size:cover;width: 100%;height: 45%;position: absolute;"></div>    <button data-card-menu="data-card-menu" class="card-face__menu-button"><img src="http://imgh.us/dots_1.svg" width="5" height="23" draggable="false"/></button><!-- Avatar -->    <div class="card-face__avatar"><!-- Bullet notification --><span class="card-face__bullet">2</span><!-- User avatar --><img src="http://i.imgur.com/gGdWosb.png" width="110" height="110" draggable="false"/></div><!-- Name -->    <h2 class="card-face__name">{{shellUserProfileSection.name}}</h2><!-- Title --><span class="card-face__title">{{shellUserProfileSection.company}}</span><!-- Cart Footer -->    <div class="card-face-footer">                <ng-md-icon icon="mail" style="fill:darkgrey" ng-click="showHiddenContent = true; hiddenContent = shellUserProfileSection.email;" ></ng-md-icon>                <ng-md-icon icon="phone" style="fill:darkgrey" ng-click="showHiddenContent = true; hiddenContent = shellUserProfileSection.phone"></ng-md-icon>                <ng-md-icon icon="home" style="fill:darkgrey" ng-click="showHiddenContent = true;  hiddenContent = shellUserProfileSection.country"></ng-md-icon><p ng-if="showHiddenContent" style="font-size: small;color: #93A7B0;">{{hiddenContent}}</p>  </div></div>'}}).directive("calenderComponent",function(){return{controller:"calenderWidgetController",template:"<div class='widget-card'><section class='calendar'><ng-md-icon style='position: absolute;left: 40px;min-width: 5px;top: 25px;fill:white;' ng-click='previousMonth();' icon='navigate_before'>p</ng-md-icon>  <h1>{{monthNames[month]}} 2015</h1><ng-md-icon style='position: absolute;right: 40px;min-width: 5px;top: 25px;fill:white' ng-click='nextMonth();' icon='navigate_next'>p</ng-md-icon>  <form action='#'>    <label class='weekday'>Mo</label>    <label class='weekday'>Tu</label>    <label class='weekday'>We</label>    <label class='weekday'>Th</label>    <label class='weekday'>Fr</label>    <label class='weekday'>Sa</label>    <label class='weekday'>Su</label>    <label class='day' data-day='{{day.day}}' ng-repeat='day in days' ng-if='day.month == month'>      <input class='appointment' date-day='{{day.day}}' ng-model='day.task' placeholder='What would you like to do?' required='true' type='text'>      <span>{{day.date}}</span>      <em></em>    </label> <div class='clearfix'></div>  </form></section></div>"}}).directive("piechartsComponent",function(){return{restrict:"E",controller:"chartsWidgetController",template:'<div class="widget-card chart-card-square" style="width:300px;" ><p class="chartsWidgetTitle">Sales for 2015 1st quarter</p><div layout="column" layout-align="center center" style="height:240px;"><canvas id="pie" class="chart chart-pie" chart-data="data1" chart-labels="labels1">        </canvas></div> </div>'}}).directive("linechartsComponent",function(){return{restrict:"E",controller:"chartsWidgetController",template:'<div class="widget-card chart-card-long" ><p class="chartsWidgetTitle">Sales for 2015 1st quarter</p><canvas id="line" class="chart chart-line" chart-data="data2" chart-labels="labels2" chart-legend="true"></canvas</div>'}}).directive("barchartsComponent",function(){return{restrict:"E",controller:"chartsWidgetController",template:'<div class="widget-card chart-card-long"><p class="chartsWidgetTitle">Sales for 2015 1st quarter</p><canvas id="bar" class="chart chart-bar" chart-data="data2" chart-labels="labels2">        </canvas> </div>'}}).directive("doughnutchartsComponent",function(){return{restrict:"E",controller:"chartsWidgetController",template:'<div class="widget-card chart-card-square"><p class="chartsWidgetTitle">Sales for 2015 1st quarter</p><div layout="column" layout-align="center center" style="height:240px;"><canvas id="doughnut" class="chart chart-doughnut" chart-data="data1" chart-labels="labels1">        </canvas></div> </div>'}}).directive("radarchartsComponent",function(){return{controller:"chartsWidgetController",template:'<div class="widget-card chart-card-square"><p class="chartsWidgetTitle">Sales for 2015 1st quarter</p><div layout="column" layout-align="center center" style="height:240px;"><canvas id="radar" class="chart chart-radar" chart-data="data2" chart-labels="labels2">        </canvas></div> </div>'}});
